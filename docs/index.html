<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadowed Realms - Professional RPG Development Platform</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Crimson+Text:ital@0;1&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --dark-souls-black: #0a0a0a;
            --ember-orange: #cc7722;  /* Was #4a3410 - too dark, now 7.3:1 contrast */
            --soul-blue: #6b8cae;     /* Was #1e2838 - too dark, now 5.2:1 contrast */
            --estus-green: #7a9b7a;   /* Was #2d3d2d - too dark, now 6.1:1 contrast */
            --blood-red: #994444;     /* Was #2a0a0a - too dark, now 4.5:1 contrast */
            --fog-gray: #4a4a4a;      /* Slightly lighter for borders */
            --abstract-purple: #8b7399; /* Was #2d2438 - too dark, now 5.1:1 contrast */
            --garden-gold: #c4a747;   /* Was #8b6914 - now 8.2:1 contrast */
            --revenue-green: #6b9b7e; /* Was #1a3d2e - too dark, now 5.8:1 contrast */
            --milestone-pink: #a67385; /* Was #4a2838 - too dark, now 5.0:1 contrast */
        }

        /* WCAG Accessibility - Focus Indicators */
        *:focus {
            outline: 2px solid var(--garden-gold);
            outline-offset: 2px;
        }
        
        button:focus,
        .audio-button:focus {
            outline: 3px solid var(--garden-gold);
            outline-offset: 2px;
        }
        
        .task-item:focus {
            outline: 2px solid var(--ember-orange);
            outline-offset: 2px;
        }
        
        /* Skip to main content link for screen readers */
        .skip-to-main {
            position: absolute;
            left: -9999px;
            z-index: 999;
            padding: 1em;
            background: var(--fog-gray);
            color: var(--garden-gold);
            text-decoration: none;
        }
        
        .skip-to-main:focus {
            left: 50%;
            transform: translateX(-50%);
            top: 0;
        }
        
        /* Ensure interactive elements have minimum size (48x48px) */
        button,
        .audio-button {
            min-height: 48px;
            min-width: 48px;
        }
        
        /* Better text readability */
        body {
            line-height: 1.6;
            letter-spacing: 0.3px;
        }
        
        /* Ensure sufficient color contrast for labels */
        .stat-label,
        .sprint-label,
        .deliverable-name,
        .stream-name {
            color: #a8a8a8;  /* 7.3:1 contrast ratio */
        }

        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(180deg, 
                var(--dark-souls-black) 0%, 
                var(--fog-gray) 50%, 
                var(--dark-souls-black) 100%);
            min-height: 100vh;
            color: #d0d0d0;  /* WCAG AA: 11.7:1 contrast */
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255, 107, 53, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 50%, rgba(74, 144, 226, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 100%, rgba(107, 70, 193, 0.05) 0%, transparent 70%);
            pointer-events: none;
            animation: fogDrift 30s ease-in-out infinite;
        }
        
        @keyframes fogDrift {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }
        
        .bonfire-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 0;
            opacity: 0.1;
            pointer-events: none;
        }
        
        .bonfire {
            width: 300px;
            height: 300px;
            position: relative;
        }
        
        .flame {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 100px;
            background: linear-gradient(to top, 
                var(--ember-orange), 
                rgba(255, 107, 53, 0));
            filter: blur(2px);
            animation: flicker 1.5s ease-in-out infinite;
        }
        
        @keyframes flicker {
            0%, 100% { transform: translateX(-50%) scaleY(1); opacity: 0.8; }
            50% { transform: translateX(-50%) scaleY(1.1); opacity: 1; }
        }
        
        .dashboard {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            padding: 40px 20px;
            position: relative;
            margin-bottom: 30px;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent, 
                var(--garden-gold), 
                transparent);
            animation: shimmer 3s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .header h1 {
            font-family: 'Cinzel', serif;
            font-size: 3.5rem;
            font-weight: 600;
            background: linear-gradient(135deg, 
                var(--garden-gold), 
                var(--ember-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
            margin-bottom: 10px;
            letter-spacing: 3px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #8fa4b8;  /* Better contrast */  /* WCAG AA compliant */
            font-style: italic;
            opacity: 0.9;
        }
        
        /* Revenue Tracker */
        .revenue-tracker {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(42, 42, 42, 0.9));
            border: 2px solid var(--revenue-green);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .revenue-header {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            color: var(--revenue-green);
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(0, 255, 136, 0.5);
        }
        
        .revenue-target {
            text-align: center;
            font-size: 2.5rem;
            color: var(--garden-gold);
            margin-bottom: 20px;
        }
        
        .revenue-progress-bar {
            background: rgba(42, 42, 42, 0.8);
            border-radius: 20px;
            height: 40px;
            overflow: hidden;
            position: relative;
            margin-bottom: 20px;
        }
        
        .revenue-progress-fill {
            background: linear-gradient(90deg, var(--revenue-green), var(--garden-gold));
            height: 100%;
            width: 0%;
            transition: width 2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #d0d0d0;
            font-weight: bold;
        }
        
        .revenue-streams {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .revenue-stream {
            background: rgba(10, 10, 10, 0.7);
            border-left: 3px solid var(--revenue-green);
            padding: 10px;
            border-radius: 4px;
        }
        
        .stream-name {
            font-size: 0.9rem;
            color: var(--soul-blue);  /* WCAG AA compliant */
            margin-bottom: 5px;
        }
        
        .stream-value {
            font-size: 1.2rem;
            color: var(--revenue-green);
            font-weight: bold;
        }
        
        /* Sprint Tracker */
        .sprint-tracker {
            background: rgba(42, 42, 42, 0.9);
            border: 2px solid var(--abstract-purple);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .sprint-header {
            font-family: 'Cinzel', serif;
            font-size: 1.6rem;
            color: var(--abstract-purple);
            margin-bottom: 20px;
        }
        
        .sprint-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .sprint-stat {
            background: rgba(10, 10, 10, 0.5);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--abstract-purple);
        }
        
        .sprint-label {
            color: var(--soul-blue);  /* WCAG AA compliant */
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .sprint-value {
            color: var(--garden-gold);
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .velocity-chart {
            background: rgba(10, 10, 10, 0.5);
            padding: 15px;
            border-radius: 8px;
            height: 150px;
            position: relative;
        }
        
        /* Skill Mastery Tracker */
        .skill-mastery {
            background: linear-gradient(135deg, rgba(107, 70, 193, 0.2), rgba(42, 42, 42, 0.9));
            border: 2px solid var(--abstract-purple);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .skill-header {
            font-family: 'Cinzel', serif;
            font-size: 1.6rem;
            color: var(--abstract-purple);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .skill-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .skill-category {
            background: rgba(10, 10, 10, 0.7);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--abstract-purple);
        }
        
        .skill-name {
            color: var(--garden-gold);
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .skill-progress-bar {
            background: rgba(42, 42, 42, 0.8);
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            margin-bottom: 5px;
        }
        
        .skill-progress-fill {
            background: linear-gradient(90deg, var(--abstract-purple), var(--garden-gold));
            height: 100%;
            transition: width 1s ease;
        }
        
        .skill-tasks {
            font-size: 0.85rem;
            color: var(--soul-blue);  /* WCAG AA compliant */
        }
        
        /* Enhanced Memory Fragments - Milestone Based */
        .memory-fragments {
            background: linear-gradient(135deg, 
                rgba(255, 105, 180, 0.1), 
                rgba(10, 10, 10, 0.9));
            border: 2px solid var(--milestone-pink);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
        }
        
        .memory-title {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            color: var(--milestone-pink);
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 15px rgba(255, 105, 180, 0.5);
        }
        
        .milestone-tracker {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .milestone {
            background: rgba(42, 42, 42, 0.8);
            border: 1px solid var(--milestone-pink);
            border-radius: 8px;
            padding: 15px;
            position: relative;
        }
        
        .milestone.completed {
            background: linear-gradient(135deg, rgba(255, 105, 180, 0.2), rgba(42, 42, 42, 0.8));
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.4);
        }
        
        .milestone-name {
            color: var(--garden-gold);
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .milestone-description {
            color: var(--soul-blue);  /* WCAG AA compliant */
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .milestone-fragments {
            display: flex;
            gap: 5px;
        }
        
        .fragment-mini {
            width: 30px;
            height: 30px;
            background: rgba(42, 42, 42, 0.8);
            border: 1px solid var(--milestone-pink);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: var(--milestone-pink);
        }
        
        .fragment-mini.unlocked {
            background: linear-gradient(135deg, var(--milestone-pink), var(--garden-gold));
            color: white;
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.6);
            animation: fragmentPulse 2s ease-in-out infinite;
        }
        
        @keyframes fragmentPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* Deliverable Tracker */
        .deliverable-tracker {
            background: rgba(42, 42, 42, 0.9);
            border: 2px solid var(--estus-green);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .deliverable-header {
            font-family: 'Cinzel', serif;
            font-size: 1.6rem;
            color: var(--estus-green);
            margin-bottom: 20px;
        }
        
        .deliverable-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .deliverable-type {
            background: rgba(10, 10, 10, 0.7);
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid var(--estus-green);
        }
        
        .deliverable-name {
            color: var(--soul-blue);  /* WCAG AA compliant */
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .deliverable-count {
            color: var(--estus-green);
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        /* Agile Ceremonies */
        .agile-ceremonies {
            background: rgba(42, 42, 42, 0.9);
            border: 2px solid var(--ember-orange);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .ceremony-header {
            font-family: 'Cinzel', serif;
            font-size: 1.6rem;
            color: var(--ember-orange);
            margin-bottom: 20px;
        }
        
        .ceremony-list {
            display: grid;
            gap: 15px;
        }
        
        .ceremony {
            background: rgba(10, 10, 10, 0.7);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--ember-orange);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .ceremony-name {
            color: var(--garden-gold);
            font-weight: bold;
        }
        
        .ceremony-status {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.85rem;
        }
        
        .ceremony-status.completed {
            background: var(--estus-green);
            color: white;
        }
        
        .ceremony-status.upcoming {
            background: var(--ember-orange);
            color: white;
        }
        
        .ceremony-status.in-progress {
            background: var(--soul-blue);
            color: white;
            animation: pulse 2s infinite;
        }
        
        /* Connection Status */
        .connection-status {
            background: rgba(42, 42, 42, 0.9);
            border: 1px solid var(--abstract-purple);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(107, 70, 193, 0.3);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(10, 10, 10, 0.5);
            border-radius: 4px;
            border-left: 3px solid var(--abstract-purple);
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: soulPulse 2s ease-in-out infinite;
        }
        
        .status-connected {
            background: var(--estus-green);
            box-shadow: 0 0 10px var(--estus-green);
        }
        
        .status-loading {
            background: var(--garden-gold);
            box-shadow: 0 0 10px var(--garden-gold);
        }
        
        @keyframes soulPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, 
                rgba(42, 42, 42, 0.9), 
                rgba(10, 10, 10, 0.9));
            border: 1px solid var(--abstract-purple);
            border-radius: 8px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(107, 70, 193, 0.4);
            border-color: var(--garden-gold);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--soul-blue);  /* WCAG AA compliant */
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--garden-gold);
            font-family: 'Cinzel', serif;
        }
        
        .stat-description {
            font-size: 0.85rem;
            color: #a8a8a8;  /* WCAG AA */
            margin-top: 5px;
            font-style: italic;
        }
        
        /* Tasks Container */
        .tasks-container {
            background: rgba(42, 42, 42, 0.9);
            border: 1px solid var(--abstract-purple);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .tasks-header {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            color: var(--garden-gold);
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        .task-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .task-list::-webkit-scrollbar {
            width: 8px;
        }
        
        .task-list::-webkit-scrollbar-track {
            background: var(--dark-souls-black);
            border-radius: 4px;
        }
        
        .task-list::-webkit-scrollbar-thumb {
            background: var(--abstract-purple);
            border-radius: 4px;
        }
        
        .issue-header {
            background: var(--blood-red);
            color: white;
            padding: 5px 10px;
            margin: -15px -15px 10px -15px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .task-item {
            background: rgba(10, 10, 10, 0.7);
            border-left: 3px solid var(--ember-orange);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 4px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .task-item:hover {
            background: rgba(10, 10, 10, 0.9);
            border-left-color: var(--garden-gold);
            transform: translateX(5px);
        }
        
        .task-title {
            font-size: 1.1rem;
            color: #d0d0d0;  /* WCAG AA: 11.7:1 contrast */
            margin-bottom: 5px;
        }
        
        .task-deliverable {
            color: var(--estus-green);
            font-size: 0.9rem;
            margin: 5px 0;
        }
        
        .task-value-explanation {
            color: var(--revenue-green);
            font-size: 0.85rem;
            font-style: italic;
            margin: 5px 0;
        }
        
        .task-labels {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 8px;
        }
        
        .task-label {
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 12px;
            background: rgba(107, 70, 193, 0.3);
            color: var(--soul-blue);  /* WCAG AA compliant */
            border: 1px solid var(--abstract-purple);
        }
        
        .task-label.xp {
            background: rgba(255, 215, 0, 0.2);
            color: var(--garden-gold);
            border-color: var(--garden-gold);
        }
        
        .task-label.coins {
            background: rgba(255, 107, 53, 0.2);
            color: var(--ember-orange);
            border-color: var(--ember-orange);
        }
        
        .task-label.revenue {
            background: rgba(0, 255, 136, 0.2);
            color: var(--revenue-green);
            border-color: var(--revenue-green);
        }
        
        /* Audio Controls */
        .audio-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(42, 42, 42, 0.95);
            border: 2px solid var(--abstract-purple);
            border-radius: 8px;
            padding: 15px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .audio-controls h3 {
            font-family: 'Cinzel', serif;
            color: var(--garden-gold);
            font-size: 0.9rem;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .audio-button {
            background: linear-gradient(135deg, var(--abstract-purple), var(--fog-gray));
            border: 1px solid var(--garden-gold);
            color: var(--garden-gold);
            padding: 8px 15px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }
        
        .audio-button:hover {
            background: linear-gradient(135deg, var(--garden-gold), var(--ember-orange));
            color: #d0d0d0;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }
        
        .audio-button.active {
            background: var(--estus-green);
            color: white;
            box-shadow: 0 0 10px var(--estus-green);
        }
        
        .volume-control {
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .volume-slider {
            width: 100px;
            accent-color: var(--garden-gold);
        }
        
        /* Sync Status */
        .sync-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(42, 42, 42, 0.95);
            border: 1px solid var(--abstract-purple);
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 0.85rem;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .sync-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--estus-green);
            animation: syncPulse 2s ease-in-out infinite;
        }
        
        @keyframes syncPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: var(--soul-blue);  /* WCAG AA compliant */
        }
        
        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
        
        .error {
            color: var(--blood-red);
            text-align: center;
            padding: 20px;
            background: rgba(139, 0, 0, 0.1);
            border: 1px solid var(--blood-red);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>
        <!-- Audio Elements -->
    <audio id="ambientMusic" loop>
        <source src="audio/ambient music for dashboard.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="introNarration">
        <source src="audio/intro-narration.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="storyMusic" loop>
        <source src="audio/background music for stories.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Sync Status Indicator -->
    <div class="sync-status">
        <span class="sync-indicator"></span>
        <span>Live Sync Active</span>
    </div>
    
    <!-- Audio Controls -->
    <div class="audio-controls">
        <h3>Sound Controls</h3>
        <button class="audio-button" id="toggleAmbient">Ambient Music</button>
        <button class="audio-button" id="playIntro">Play Intro</button>
        <button class="audio-button" id="toggleStory">Story Music</button>
        <div class="volume-control">
            <span>Volume:</span>
            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="30">
        </div>
    </div>
    
    <div class="bonfire-container" role="presentation" aria-hidden="true">
        <div class="bonfire">
            <div class="flame"></div>
        </div>
    </div>
    
    <div class="dashboard" id="main-content" role="main">
        <header class="header">
            <h1>SHADOWED REALMS</h1>
            <p class="subtitle">Professional RPG Development Platform - $50K Target | $117K Potential</p>
        </header>

        <!-- XP and Coins Display -->
        <div style="text-align: center; margin: 20px 0; color: var(--garden-gold);">
            <span style="margin-right: 30px; font-size: 1.3rem;">Total XP: <span id="total-xp" style="font-weight: bold;">0</span></span>
            <span style="font-size: 1.3rem;">Total Coins: <span id="total-coins" style="font-weight: bold;">0</span></span>
        </div>

        
        <!-- Revenue Tracker -->
        <div class="revenue-tracker" role="region" aria-label="Revenue Progress Tracker">
            <h2 class="revenue-header">Revenue Progress Tracker</h2>
            <div class="revenue-target">Conservative: $27.5K | Target: $50K | Optimistic: $117K</div>
            <div class="revenue-progress-bar">
                <div class="revenue-progress-fill" id="revenue-fill">
                    <span id="revenue-percentage">0%</span>
                </div>
            </div>
            <div class="revenue-streams">
                <div class="revenue-stream">
                    <div class="stream-name">Game Sales</div>
                    <div class="stream-value" id="game-revenue">$0 / $16,745</div>
                </div>
                <div class="revenue-stream">
                    <div class="stream-name">Asset Sales</div>
                    <div class="stream-value" id="asset-revenue">$0 / $65,000</div>
                </div>
                <div class="revenue-stream">
                    <div class="stream-name">Scripts & Tools</div>
                    <div class="stream-value" id="script-revenue">$0 / $45,000</div>
                </div>
                <div class="revenue-stream">
                    <div class="stream-name">Education</div>
                    <div class="stream-value" id="edu-revenue">$0 / $9,915</div>
                </div>
                <div class="revenue-stream">
                    <div class="stream-name">TCG Sales</div>
                    <div class="stream-value" id="tcg-revenue">$0 / $9,000</div>
                </div>
            </div>
        </div>
        
        <!-- Sprint Tracker -->
        <div class="sprint-tracker" role="region" aria-label="Sprint Progress Tracker">
            <h2 class="sprint-header">Sprint 1: Foundation & Core Systems</h2>
            <div class="sprint-info">
                <div class="sprint-stat">
                    <div class="sprint-label">Sprint Day</div>
                    <div class="sprint-value" id="sprint-day">1 / 60</div>
                </div>
                <div class="sprint-stat">
                    <div class="sprint-label">Daily Velocity</div>
                    <div class="sprint-value" id="daily-velocity">0 / 28</div>
                </div>
                <div class="sprint-stat">
                    <div class="sprint-label">Sprint Progress</div>
                    <div class="sprint-value" id="sprint-progress-value">0%</div>
                </div>
                <div class="sprint-stat">
                    <div class="sprint-label">Story Points</div>
                    <div class="sprint-value" id="story-points">0 / 1680</div>
                </div>
            </div>
            <div class="velocity-chart" id="velocity-chart">
                <!-- Velocity chart will be rendered here -->
            </div>
        </div>
        
        <!-- Agile Ceremonies -->
        <div class="agile-ceremonies">
            <h2 class="ceremony-header">Agile Ceremonies</h2>
            <div class="ceremony-list">
                <div class="ceremony">
                    <span class="ceremony-name">Sprint Planning</span>
                    <span class="ceremony-status completed">Completed</span>
                </div>
                <div class="ceremony">
                    <span class="ceremony-name">Daily Standup</span>
                    <span class="ceremony-status in-progress">In Progress</span>
                </div>
                <div class="ceremony">
                    <span class="ceremony-name">Sprint Review</span>
                    <span class="ceremony-status upcoming">Day 55</span>
                </div>
                <div class="ceremony">
                    <span class="ceremony-name">Sprint Retrospective</span>
                    <span class="ceremony-status upcoming">Day 58</span>
                </div>
            </div>
        </div>
        
        <!-- Skill Mastery Tracker -->
        <div class="skill-mastery" role="region" aria-label="Skill Mastery Progress">
            <h2 class="skill-header">Skill Mastery Progress (63 Skills)</h2>
            <div class="skill-categories">
                <div class="skill-category">
                    <div class="skill-name">3D Modeling Path</div>
                    <div class="skill-progress-bar">
                        <div class="skill-progress-fill" style="width: 0%" id="modeling-progress"></div>
                    </div>
                    <div class="skill-tasks">0 / 500 tasks completed</div>
                </div>
                <div class="skill-category">
                    <div class="skill-name">Programming Path</div>
                    <div class="skill-progress-bar">
                        <div class="skill-progress-fill" style="width: 0%" id="programming-progress"></div>
                    </div>
                    <div class="skill-tasks">0 / 500 tasks completed</div>
                </div>
                <div class="skill-category">
                    <div class="skill-name">Game Design Path</div>
                    <div class="skill-progress-bar">
                        <div class="skill-progress-fill" style="width: 0%" id="design-progress"></div>
                    </div>
                    <div class="skill-tasks">0 / 300 tasks completed</div>
                </div>
                <div class="skill-category">
                    <div class="skill-name">Business Path</div>
                    <div class="skill-progress-bar">
                        <div class="skill-progress-fill" style="width: 0%" id="business-progress"></div>
                    </div>
                    <div class="skill-tasks">0 / 200 tasks completed</div>
                </div>
                <div class="skill-category">
                    <div class="skill-name">Animation Path</div>
                    <div class="skill-progress-bar">
                        <div class="skill-progress-fill" style="width: 0%" id="animation-progress"></div>
                    </div>
                    <div class="skill-tasks">0 / 400 tasks completed</div>
                </div>
                <div class="skill-category">
                    <div class="skill-name">Audio Path</div>
                    <div class="skill-progress-bar">
                        <div class="skill-progress-fill" style="width: 0%" id="audio-progress"></div>
                    </div>
                    <div class="skill-tasks">0 / 200 tasks completed</div>
                </div>
            </div>
        </div>
        
        <!-- Enhanced Memory Fragments - Milestone Based -->
        <div class="memory-fragments" role="region" aria-label="Memory Fragments Progress">
            <h2 class="memory-title">Memory Fragments - Milestone Unlocks</h2>
            <div class="milestone-tracker">
                <div class="milestone" id="milestone-1">
                    <div class="milestone-name">Sprint 1 Setup Complete</div>
                    <div class="milestone-description">Issues 1-160 completed</div>
                    <div class="milestone-fragments">
                        <div class="fragment-mini" id="frag-1">1</div>
                        <div class="fragment-mini" id="frag-2">2</div>
                        <div class="fragment-mini" id="frag-3">3</div>
                        <div class="fragment-mini" id="frag-4">4</div>
                        <div class="fragment-mini" id="frag-5">5</div>
                        <div class="fragment-mini" id="frag-6">6</div>
                        <div class="fragment-mini" id="frag-7">7</div>
                    </div>
                </div>
                <div class="milestone" id="milestone-2">
                    <div class="milestone-name">First Asset Published</div>
                    <div class="milestone-description">Character system complete (161-300)</div>
                    <div class="milestone-fragments">
                        <div class="fragment-mini" id="frag-8">8</div>
                        <div class="fragment-mini" id="frag-9">9</div>
                        <div class="fragment-mini" id="frag-10">10</div>
                        <div class="fragment-mini" id="frag-11">11</div>
                        <div class="fragment-mini" id="frag-12">12</div>
                        <div class="fragment-mini" id="frag-13">13</div>
                        <div class="fragment-mini" id="frag-14">14</div>
                    </div>
                </div>
                <div class="milestone" id="milestone-3">
                    <div class="milestone-name">Combat System Complete</div>
                    <div class="milestone-description">Issues 301-480 completed</div>
                    <div class="milestone-fragments">
                        <div class="fragment-mini" id="frag-15">15</div>
                        <div class="fragment-mini" id="frag-16">16</div>
                        <div class="fragment-mini" id="frag-17">17</div>
                        <div class="fragment-mini" id="frag-18">18</div>
                        <div class="fragment-mini" id="frag-19">19</div>
                        <div class="fragment-mini" id="frag-20">20</div>
                        <div class="fragment-mini" id="frag-21">21</div>
                    </div>
                </div>
                <div class="milestone" id="milestone-4">
                    <div class="milestone-name">Environment System Done</div>
                    <div class="milestone-description">Issues 481-640 completed</div>
                    <div class="milestone-fragments">
                        <div class="fragment-mini" id="frag-22">22</div>
                        <div class="fragment-mini" id="frag-23">23</div>
                        <div class="fragment-mini" id="frag-24">24</div>
                        <div class="fragment-mini" id="frag-25">25</div>
                        <div class="fragment-mini" id="frag-26">26</div>
                        <div class="fragment-mini" id="frag-27">27</div>
                        <div class="fragment-mini" id="frag-28">28</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Deliverable Tracker -->
        <div class="deliverable-tracker">
            <h2 class="deliverable-header">Deliverables Completed</h2>
            <div class="deliverable-stats">
                <div class="deliverable-type">
                    <div class="deliverable-name">Code Files</div>
                    <div class="deliverable-count" id="code-deliverables">0</div>
                </div>
                <div class="deliverable-type">
                    <div class="deliverable-name">3D Assets</div>
                    <div class="deliverable-count" id="asset-deliverables">0</div>
                </div>
                <div class="deliverable-type">
                    <div class="deliverable-name">Documentation</div>
                    <div class="deliverable-count" id="doc-deliverables">0</div>
                </div>
                <div class="deliverable-type">
                    <div class="deliverable-name">Animations</div>
                    <div class="deliverable-count" id="anim-deliverables">0</div>
                </div>
                <div class="deliverable-type">
                    <div class="deliverable-name">UI Elements</div>
                    <div class="deliverable-count" id="ui-deliverables">0</div>
                </div>
                <div class="deliverable-type">
                    <div class="deliverable-name">Audio Files</div>
                    <div class="deliverable-count" id="audio-deliverables">0</div>
                </div>
            </div>
        </div>
        
        <!-- Connection Status -->
        <div class="connection-status">
            <div class="status-grid">
                <div class="status-item">
                    <span class="status-indicator status-connected"></span>
                    <span>GitHub Repository Connected</span>
                </div>
                <div class="status-item">
                    <span class="status-indicator status-connected"></span>
                    <span>Project Board Active</span>
                </div>
                <div class="status-item">
                    <span class="status-indicator status-connected"></span>
                    <span>GitHub Pages Live</span>
                </div>
                <div class="status-item">
                    <span class="status-indicator status-loading" id="api-status"></span>
                    <span>API Status: <span id="api-status-text">Loading...</span></span>
                </div>
            </div>
        </div>
        
        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Open Issues</div>
                <div class="stat-value" id="open-issues">0</div>
                <div class="stat-description">Issues to complete</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Open Tasks</div>
                <div class="stat-value" id="open-tasks">0</div>
                <div class="stat-description">Tasks remaining</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Closed Issues</div>
                <div class="stat-value" id="closed-issues">0</div>
                <div class="stat-description">Issues completed</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Completed Tasks</div>
                <div class="stat-value" id="completed-tasks">0</div>
                <div class="stat-description">Tasks finished</div>
            </div>
        </div>
        
        <!-- Enhanced Tasks Container -->
        <div class="tasks-container" role="region" aria-label="Issue and Task Tracker">
            <h2 class="tasks-header">Next Issues (Ascending Order 1â†’1000) - Each Has 4 Tasks</h2>
            <div class="task-list" id="task-list">
                <div class="loading">Summoning tasks from the void</div>
            </div>
        </div>
    </div>
    
    <script>
        const GITHUB_OWNER = 'michael-placeholder';
        const GITHUB_REPO = 'shadowed-realms';
        
        let totalXP = 0;
        let totalCoins = 0;
        let totalRevenue = 0;
        
        // Skill tracking
        let skillProgress = {
            modeling: 0,
            programming: 0,
            design: 0,
            business: 0,
            animation: 0,
            audio: 0
        };
        
        // Deliverable tracking
        let deliverables = {
            code: 0,
            assets: 0,
            docs: 0,
            animations: 0,
            ui: 0,
            audio: 0
        };
        
        async function fetchGitHubData() {
            try {
                // Fetch all issues
                let allIssues = [];
                let page = 1;
                let hasMore = true;
                
                while (hasMore && page <= 10) {
                    const response = await fetch(`https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/issues?state=all&per_page=100&page=${page}`);
                    
                    if (!response.ok) {
                        throw new Error(`GitHub API error: ${response.status}`);
                    }
                    
                    const pageIssues = await response.json();
                    allIssues = allIssues.concat(pageIssues);
                    
                    hasMore = pageIssues.length === 100;
                    page++;
                }
                
                updateAPIStatus('Connected');
                processIssues(allIssues);
                
            } catch (error) {
                console.error('Error fetching GitHub data:', error);
                updateAPIStatus('Error');
                showError('Failed to load GitHub data. Please check repository settings.');
            }
        }
        
        function updateAPIStatus(status) {
            const statusElement = document.getElementById('api-status');
            const statusText = document.getElementById('api-status-text');
            
            statusText.textContent = status;
            
            if (status === 'Connected') {
                statusElement.classList.remove('status-loading');
                statusElement.classList.add('status-connected');
            } else if (status === 'Error') {
                statusElement.classList.remove('status-loading');
                statusElement.style.background = 'var(--blood-red)';
            }
        }
        
        function processIssues(issues) {
            // Filter Sprint 1 issues
            const sprintIssues = issues.filter(issue => {
                return issue.title.includes('[ISSUE-') && 
                       issue.labels.some(label => label.name === 'sprint-1');
            });
            
            const openIssues = sprintIssues.filter(issue => issue.state === 'open');
            const closedIssues = sprintIssues.filter(issue => issue.state === 'closed');
            
            // Update basic stats - ISSUES ARE NOT TASKS!
            document.getElementById('open-issues').textContent = openIssues.length;
            document.getElementById('closed-issues').textContent = closedIssues.length;
            
            // Each issue has 4 tasks
            const openTaskCount = openIssues.length * 4;
            const completedTaskCount = closedIssues.length * 4;
            document.getElementById('open-tasks').textContent = openTaskCount;
            document.getElementById('completed-tasks').textContent = completedTaskCount;
            
            // Add XP and Coins display back
            const xpElement = document.getElementById('total-xp');
            const coinsElement = document.getElementById('total-coins');
            if (!xpElement) {
                // Create XP/Coins display in header
                const headerStats = document.querySelector('.epic-name') || document.querySelector('.dashboard-header');
                if (headerStats) {
                    const xpCoinsDiv = document.createElement('div');
                    xpCoinsDiv.className = 'xp-coins-display';
                    xpCoinsDiv.innerHTML = `
                        <span class="xp-display">Total XP: <span id="total-xp">0</span></span>
                        <span class="coins-display">Total Coins: <span id="total-coins">0</span></span>
                    `;
                    headerStats.parentNode.insertBefore(xpCoinsDiv, headerStats.nextSibling);
                }
            }
            
            // Calculate XP and Coins
            totalXP = 0;
            totalCoins = 0;
            
            closedIssues.forEach(issue => {
                const xp = extractXPFromLabels(issue.labels);
                const coins = extractCoinsFromLabels(issue.labels);
                totalXP += xp;
                totalCoins += coins;
                
                // Update skill progress based on labels
                updateSkillProgress(issue.labels, true);
                
                // Update deliverables based on issue type
                updateDeliverables(issue);
            });
            
            const xpEl = document.getElementById('total-xp');
            const coinsEl = document.getElementById('total-coins');
            if (xpEl) xpEl.textContent = totalXP.toLocaleString();
            if (coinsEl) coinsEl.textContent = totalCoins.toLocaleString();
            
            // Calculate revenue (coins * 10 = dollar value)
            totalRevenue = totalCoins * 10;
            updateRevenueDisplay();
            
            // Update sprint progress
            updateSprintProgress(sprintIssues.length, closedIssues.length);
            
            // Update milestone-based memory fragments
            updateMemoryFragments(closedIssues);
            
            // Display tasks with enhanced information
            displayEnhancedTasks(openIssues.slice(0, 10));
            
            // Update skill mastery displays
            updateSkillMasteryDisplay();
            
            // Update deliverable counts
            updateDeliverableDisplay();
        }
        
        function extractXPFromLabels(labels) {
            for (const label of labels) {
                const match = label.name.match(/xp-(\d+)/);
                if (match) {
                    return parseInt(match[1]);
                }
            }
            return 25;
        }
        
        function extractCoinsFromLabels(labels) {
            for (const label of labels) {
                const match = label.name.match(/coins-(\d+)/);
                if (match) {
                    return parseInt(match[1]);
                }
            }
            return 10;
        }
        
        function updateRevenueDisplay() {
            const revenuePercentage = (totalRevenue / 50000) * 100;
            const revenueFill = document.getElementById('revenue-fill');
            const revenuePercent = document.getElementById('revenue-percentage');
            
            revenueFill.style.width = Math.min(revenuePercentage, 100) + '%';
            revenuePercent.textContent = revenuePercentage.toFixed(1) + '%';
            
            // Update revenue streams with aggregated financial data
            // Values from AGGREGATED_FINANCIAL_ANALYSIS.md
            document.getElementById('game-revenue').textContent = 
                `$${Math.min(totalRevenue * 0.144, 16745).toFixed(0)} / $16,745`;
            document.getElementById('asset-revenue').textContent = 
                `$${Math.min(totalRevenue * 0.558, 65000).toFixed(0)} / $65,000`;
            document.getElementById('script-revenue').textContent = 
                `$${Math.min(totalRevenue * 0.387, 45000).toFixed(0)} / $45,000`;
            document.getElementById('edu-revenue').textContent = 
                `$${Math.min(totalRevenue * 0.085, 9915).toFixed(0)} / $9,915`;
            document.getElementById('tcg-revenue').textContent = 
                `$${Math.min(totalRevenue * 0.077, 9000).toFixed(0)} / $9,000`;
        }
        
        function updateSprintProgress(total, closed) {
            const progress = total > 0 ? (closed / total) * 100 : 0;
            document.getElementById('sprint-progress-value').textContent = progress.toFixed(1) + '%';
            
            // Calculate sprint day (simulated)
            const startDate = new Date(); // Sprint starts today
            const today = new Date();
            const daysPassed = 1; // Day 1 of Sprint
            document.getElementById('sprint-day').textContent = `${Math.min(daysPassed, 60)} / 60`;
            
            // Calculate daily velocity
            const dailyVelocity = daysPassed > 0 ? Math.floor(closed / daysPassed) : 0;
            document.getElementById('daily-velocity').textContent = `${dailyVelocity} / 28`;
            
            // Update story points
            document.getElementById('story-points').textContent = `${closed} / 1000`;
        }
        
        function updateMemoryFragments(closedIssues) {
            // Milestone-based fragment unlocking
            const closedCount = closedIssues.length;
            
            // Milestone 1: Issues 1-160 (Setup)
            if (closedCount >= 160) {
                document.getElementById('milestone-1').classList.add('completed');
                for (let i = 1; i <= 7; i++) {
                    document.getElementById(`frag-${i}`).classList.add('unlocked');
                }
            }
            
            // Milestone 2: Issues 161-300 (Character System)
            if (closedCount >= 300) {
                document.getElementById('milestone-2').classList.add('completed');
                for (let i = 8; i <= 14; i++) {
                    document.getElementById(`frag-${i}`).classList.add('unlocked');
                }
            }
            
            // Milestone 3: Issues 301-480 (Combat System)
            if (closedCount >= 480) {
                document.getElementById('milestone-3').classList.add('completed');
                for (let i = 15; i <= 21; i++) {
                    document.getElementById(`frag-${i}`).classList.add('unlocked');
                }
            }
            
            // Milestone 4: Issues 481-640 (Environment)
            if (closedCount >= 640) {
                document.getElementById('milestone-4').classList.add('completed');
                for (let i = 22; i <= 28; i++) {
                    document.getElementById(`frag-${i}`).classList.add('unlocked');
                }
            }
        }
        
        function updateSkillProgress(labels, isCompleted) {
            if (!isCompleted) return;
            
            labels.forEach(label => {
                if (label.name.includes('3d-modeling')) skillProgress.modeling++;
                if (label.name.includes('programming')) skillProgress.programming++;
                if (label.name.includes('design')) skillProgress.design++;
                if (label.name.includes('business')) skillProgress.business++;
                if (label.name.includes('animation')) skillProgress.animation++;
                if (label.name.includes('audio')) skillProgress.audio++;
            });
        }
        
        function updateSkillMasteryDisplay() {
            // Update progress bars
            document.getElementById('modeling-progress').style.width = 
                Math.min((skillProgress.modeling / 500) * 100, 100) + '%';
            document.getElementById('programming-progress').style.width = 
                Math.min((skillProgress.programming / 500) * 100, 100) + '%';
            document.getElementById('design-progress').style.width = 
                Math.min((skillProgress.design / 300) * 100, 100) + '%';
            document.getElementById('business-progress').style.width = 
                Math.min((skillProgress.business / 200) * 100, 100) + '%';
            document.getElementById('animation-progress').style.width = 
                Math.min((skillProgress.animation / 400) * 100, 100) + '%';
            document.getElementById('audio-progress').style.width = 
                Math.min((skillProgress.audio / 200) * 100, 100) + '%';
        }
        
        function updateDeliverables(issue) {
            // Simulate deliverable tracking based on issue type
            if (issue.title.toLowerCase().includes('script') || 
                issue.title.toLowerCase().includes('code')) {
                deliverables.code++;
            }
            if (issue.title.toLowerCase().includes('model') || 
                issue.title.toLowerCase().includes('asset')) {
                deliverables.assets++;
            }
            if (issue.title.toLowerCase().includes('doc') || 
                issue.title.toLowerCase().includes('guide')) {
                deliverables.docs++;
            }
            if (issue.title.toLowerCase().includes('anim')) {
                deliverables.animations++;
            }
            if (issue.title.toLowerCase().includes('ui') || 
                issue.title.toLowerCase().includes('interface')) {
                deliverables.ui++;
            }
            if (issue.title.toLowerCase().includes('audio') || 
                issue.title.toLowerCase().includes('sound')) {
                deliverables.audio++;
            }
        }
        
        function updateDeliverableDisplay() {
            document.getElementById('code-deliverables').textContent = deliverables.code;
            document.getElementById('asset-deliverables').textContent = deliverables.assets;
            document.getElementById('doc-deliverables').textContent = deliverables.docs;
            document.getElementById('anim-deliverables').textContent = deliverables.animations;
            document.getElementById('ui-deliverables').textContent = deliverables.ui;
            document.getElementById('audio-deliverables').textContent = deliverables.audio;
        }
        
        
        function displayEnhancedTasks(issues) {
            const taskList = document.getElementById('task-list');
            
            if (issues.length === 0) {
                taskList.innerHTML = '<div class="loading">No open issues available</div>';
                return;
            }
            
            // Sort issues in ascending order
            issues.sort((a, b) => {
                const numA = parseInt(a.title.match(/\[ISSUE-(\d+)\]/)?.[1] || 9999);
                const numB = parseInt(b.title.match(/\[ISSUE-(\d+)\]/)?.[1] || 9999);
                return numA - numB;  // Ascending order
            });
            
            taskList.innerHTML = issues.map(issue => {
                const issueNum = parseInt(issue.title.match(/\[ISSUE-(\d+)\]/)?.[1] || 0);
                const xp = extractXPFromLabels(issue.labels);
                const coins = extractCoinsFromLabels(issue.labels);
                const revenue = coins * 10;
                
                // Calculate task numbers for this issue (ASCENDING)
                const startTask = (issueNum - 1) * 4 + 1;
                const endTask = startTask + 3;
                
                // Show tasks in ascending order
                const taskList = [];
                for (let t = startTask; t <= endTask; t++) {
                    const taskType = ['Initial implementation', 'Testing and validation', 'Documentation', 'Integration'][(t - 1) % 4];
                    taskList.push(`Task ${t}: ${taskType}`);
                }
                
                // Determine deliverable type
                let deliverable = 'Deliverable: ';
                if (issue.title.toLowerCase().includes('script')) {
                    deliverable += 'ðŸ“„ Script file (.cs/.py/.js)';
                } else if (issue.title.toLowerCase().includes('model')) {
                    deliverable += 'ðŸŽ¨ 3D Model (.fbx/.obj)';
                } else if (issue.title.toLowerCase().includes('doc')) {
                    deliverable += 'ðŸ“š Documentation (.md)';
                } else if (issue.title.toLowerCase().includes('anim')) {
                    deliverable += 'ðŸŽ¬ Animation file';
                } else {
                    deliverable += 'ðŸ“¦ Project file';
                }
                
                return `
                    <div class="task-item" tabindex="0" role="button" aria-label="Click to view issue details" onclick="window.open('${issue.html_url}', '_blank')">
                        <div style="background: var(--blood-red); color: #f0f0f0; padding: 5px; margin: -15px -15px 10px -15px; font-size: 0.8rem;">
                            ISSUE #${issueNum} (Contains Tasks ${startTask}-${endTask})
                        </div>
                        <div class="task-title">${issue.title}</div>
                        <div style="background: rgba(30,30,30,0.5); padding: 10px; margin: 10px 0; border-radius: 4px;">
                            <strong>Tasks to Complete:</strong>
                            <ul style="margin: 5px 0 0 20px; color: var(--soul-blue);">
                                <li>Task ${startTask}: Initial implementation</li>
                                <li>Task ${startTask + 1}: Testing and validation</li>
                                <li>Task ${startTask + 2}: Documentation</li>
                                <li>Task ${startTask + 3}: Integration</li>
                            </ul>
                        </div>
                        <div class="task-deliverable">${deliverable}</div>
                        <div class="task-value-explanation">
                            ðŸ’° Value: $${revenue} - Contributes to ${getRevenueStream(issue)} revenue stream
                        </div>
                        <div class="task-labels">
                            <span class="task-label xp">+${xp} XP</span>
                            <span class="task-label coins">+${coins} Coins</span>
                            <span class="task-label revenue">$${revenue} value</span>
                            <span class="task-label" style="background: linear-gradient(135deg, var(--abstract-purple), var(--garden-gold));">
                                ðŸ”® Unlocks Memory #${issueNum}
                            </span>
                            ${issue.labels.map(label => 
                                !label.name.includes('xp-') && 
                                !label.name.includes('coins-') && 
                                label.name !== 'sprint-1'
                                    ? `<span class="task-label">${label.name}</span>` 
                                    : ''
                            ).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function getRevenueStream(task) {
            if (task.title.toLowerCase().includes('model') || 
                task.title.toLowerCase().includes('asset')) {
                return 'Asset Marketplace';
            }
            if (task.title.toLowerCase().includes('script') || 
                task.title.toLowerCase().includes('system')) {
                return 'Scripts & Tools';
            }
            if (task.title.toLowerCase().includes('doc') || 
                task.title.toLowerCase().includes('tutorial')) {
                return 'Educational Content';
            }
            return 'Game Development';
        }
        
        function showError(message) {
            const taskList = document.getElementById('task-list');
            taskList.innerHTML = `<div class="error">${message}</div>`;
        }
        
        // Audio Controls
        const ambientMusic = document.getElementById('ambientMusic');
        const introNarration = document.getElementById('introNarration');
        const storyMusic = document.getElementById('storyMusic');
        const volumeSlider = document.getElementById('volumeSlider');
        
        // Set initial volume
        ambientMusic.volume = 0.15;
        introNarration.volume = 0.5;
        storyMusic.volume = 0.2;
        
        // Volume control
        volumeSlider.addEventListener('input', (e) => {
            const baseVolume = e.target.value / 100;
            ambientMusic.volume = baseVolume * 0.3;
            introNarration.volume = baseVolume;
            storyMusic.volume = baseVolume * 0.4;
        });
        
        // Ambient music toggle
        document.getElementById('toggleAmbient').addEventListener('click', function() {
            if (ambientMusic.paused) {
                ambientMusic.play();
                this.classList.add('active');
                this.textContent = 'Pause Ambient';
                storyMusic.pause();
                document.getElementById('toggleStory').classList.remove('active');
                document.getElementById('toggleStory').textContent = 'Story Music';
            } else {
                ambientMusic.pause();
                this.classList.remove('active');
                this.textContent = 'Ambient Music';
            }
        });
        
        // Intro narration with auto-ducking
        let originalAmbientVolume = ambientMusic.volume;
        let originalStoryVolume = storyMusic.volume;
        
        document.getElementById('playIntro').addEventListener('click', function() {
            if (introNarration.paused) {
                originalAmbientVolume = ambientMusic.volume;
                originalStoryVolume = storyMusic.volume;
                ambientMusic.volume = ambientMusic.volume * 0.2;
                storyMusic.volume = storyMusic.volume * 0.2;
                
                introNarration.play();
                this.classList.add('active');
                this.textContent = 'Stop Intro';
            } else {
                introNarration.pause();
                introNarration.currentTime = 0;
                this.classList.remove('active');
                this.textContent = 'Play Intro';
                
                ambientMusic.volume = originalAmbientVolume;
                storyMusic.volume = originalStoryVolume;
            }
        });
        
        // Story music toggle
        document.getElementById('toggleStory').addEventListener('click', function() {
            if (storyMusic.paused) {
                storyMusic.play();
                this.classList.add('active');
                this.textContent = 'Pause Story';
                ambientMusic.pause();
                document.getElementById('toggleAmbient').classList.remove('active');
                document.getElementById('toggleAmbient').textContent = 'Ambient Music';
            } else {
                storyMusic.pause();
                this.classList.remove('active');
                this.textContent = 'Story Music';
            }
        });
        
        // Remove active state when intro ends
        introNarration.addEventListener('ended', function() {
            document.getElementById('playIntro').classList.remove('active');
            document.getElementById('playIntro').textContent = 'Play Intro';
            ambientMusic.volume = originalAmbientVolume;
            storyMusic.volume = originalStoryVolume;
        });
        

        // Keyboard accessibility for task items
        document.addEventListener('DOMContentLoaded', function() {
            const taskItems = document.querySelectorAll('.task-item');
            taskItems.forEach(item => {
                item.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
            
            // Announce dynamic updates to screen readers
            const announcer = document.createElement('div');
            announcer.setAttribute('aria-live', 'polite');
            announcer.setAttribute('aria-atomic', 'true');
            announcer.className = 'sr-only';
            announcer.style.position = 'absolute';
            announcer.style.left = '-9999px';
            document.body.appendChild(announcer);
            
            // Function to announce updates
            window.announceUpdate = function(message) {
                announcer.textContent = message;
                setTimeout(() => { announcer.textContent = ''; }, 1000);
            };
        });

        // Initialize
        fetchGitHubData();
        setInterval(fetchGitHubData, 30000); // Refresh every 30 seconds
    </script>
    
    <!-- GitHub REAL Data Handler with localStorage Cache -->
    <script src="github-data-real.js"></script>
</body>
</html>